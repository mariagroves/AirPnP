<div class="container">
  <div class="row d-flex justify-content-center">
    <div class="show-title">
      <h1> <%= @toilet.title %> </h1>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-8 mb-4">
      <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
          <% @toilet.images.each_with_index do |image, index| %>
            <% if index == 0 %>
              <div class="carousel-item active">
                <img class="d-block" src="<%= cl_image_path image.url %>" alt="First slide">
              </div>
            <% else %>
              <div class="carousel-item">
                <img class="d-block" src="<%= cl_image_path image.url %>" alt="First slide">
              </div>
            <% end %>
          <% end %>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>

      <div class="show-card d-flex align-items-center justify-content-between">
        <div class="sub-title">
          <h3>This toilet in <strong> <%= @toilet.location %> </strong> is hosted by <strong> <%= @toilet.owner.first_name%> <%= @toilet.owner.last_name %> </strong> </h3>
        </div>
        <div>
          <img src="https://blog.fromjapan.co.jp/en/wp-content/uploads/2015/08/Poop_2.jpg" alt="" class="avatar-large">
        </div>
      </div>

      <div class="show-card">
        <h3>Details</h3>
        <ul>
          <strong>DKK</strong> <%= @toilet.price %> per use
          <% @toilet.description.split(',').each do |description| %>
            <li class="d-flex">
              <div>
                <i class="fas fa-toilet mr-2"></i>
              </div>
              <%= description %>
            </li>
          <% end %>
        </ul>
      </div>

      <div class="show-card">
        <h3>Reviews</h3>
        <% if @toilet.reviews.empty? %>
          There are no reviews for this toilet!
        <% else %>
            <% @toilet.reviews.each do |review| %>
              <div class="speech-wrapper d-flex">
                <div class="bubble">
                  <div class="txt">
                    <p class="name"> <%= review.user.first_name %> <%= review.user.last_name %></p>
                    <p class="message"> <%= review.content %></p>
                    <span class="timestamp"> <%= review.created_at.strftime("%m-%e-%y %H:%M") %> </span>
                  </div>
                <div class="bubble-arrow"></div>
                 <% if review.user == current_user %>
                  <%= link_to toilet_review_path(review.toilet, review),
                      method: :delete,
                      data: { confirm: "Are you sure?" } do %>
                    <div class="small-delete-button-fill card-button">Delete</div>
                  <% end %>
                <% end %>
                </div>
              </div>
            <% end %>
        <% end %>
      </div>

      <div class="show-card">
        <%= simple_form_for [@toilet, @review] do |f| %>
          <%= f.input :content, label: "Please leave a review" %>
          <%= f.submit "Submit" %>
        <% end %>
      </div>

    </div>
    <div class="side-wrap col-sm-4">
      <div class="sidebar">
        <div class="booking-card">
            <%= simple_form_for [@toilet, @booking] do |f| %>
              <%= f.input :date, as: :date_time_picker, input_html:
                { data:
                  {
                    date_format: "YYYY-MM-DD",
                  }
                }  %>
              <%= f.input :time, as: :date_time_picker, input_html:
              { data:
                  {

                    date_format: 'HH:mm:ss',
                    pickDate:false,
                    date_side_by_side: true,
                    date_min_date: Time.current.strftime('%Y-%m-%d')
                  }
                } %>
              <%= f.submit "Book!" %>
            <% end %>
        </div>
        <div
          id="showmapbox"
          style="width: 100%;
          height: 300px;"
          data-markers="<%= @marker.to_json %>"
          data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
        ></div>
      </div>
    </div>
<!--     <br>
    <div class="col-sm-8 mb-4">

    </div> -->
  </div>
</div>


